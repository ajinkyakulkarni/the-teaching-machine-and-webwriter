
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JPanel</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
</head>
<body>
	<center><h2>JPanel</h2></center>
	<center><h4>This is a test applet for the project</h4></center>
	<div id="main" align="center" >
	<img src="http://localhost:8080/test2/IMAGE_servlet" id="output" alt="" usemap="#mapCoor"  >
	</div>
	<script type="text/javascript">
	$(document).ready(function(){
		$('#output').focus();
		$('#output').bind("contextmenu",function(e){
			   alert('Context Menu event has fired!');
			   return false;
			});
	
		 $('#output').click(function(e) {
			    var offset = $(this).offset();
			    var X = Math.floor(e.pageX - offset.left);
			    var Y = Math.floor(e.pageY - offset.top);
			    console.log(X, Y);
			    var url = '/test2/ButtonClick';
			    $.getJSON(url, {
			    	x: X,
			    	y: Y
			    }, function(data){
			    	console.log('submitted');
			    	console.log(data);
			    	setTimeout(
			    			$('#output').attr('src', $('#output').attr('src')+'?'+Math.random()),
			    			500
			    			);
			    	// refresh
			    	/* $('#output').attr('src', $('#output').attr('src')+'?'+Math.random()); */ 
					
				});  
			  });
	});
	
	</script>
</body>
</html>